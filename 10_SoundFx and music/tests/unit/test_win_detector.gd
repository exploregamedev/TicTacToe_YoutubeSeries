extends "res://addons/gut/test.gd"

var no_win_parameters = [
	[
		[
			["", "", ""],
			["", "", ""],
			["", "", ""]
		]
	],
	[
		[
			["X", "", ""],
			["X", "", ""],
			["O", "", ""]
		],
	],
	[
		[
			["O", "", ""],
			["O", "", ""],
			["X", "", ""]
		],
	],
	[
		[
			["X", "", ""],
			["O", "", ""],
			["X", "", ""]
		],
	],
	[
		[
			["O", "O", "X"],
			["", "", ""],
			["", "", ""]
		],
	],
	[
		[
			["O", "X", "X"],
			["", "", ""],
			["", "", ""]
		],
	],
	[
		[
			["O", "X", "O"],
			["", "", ""],
			["", "", ""]
		],
	],
	[
		[
			["O", "", ""],
			["", "O", ""],
			["", "", "X"]
		],
	],
	[
		[
			["O", "", ""],
			["", "X", ""],
			["", "", "X"]
		],
	],
	[
		[
			["", "", "O"],
			["", "O", ""],
			["X", "", ""]
		],
	],
	[
		[
			["", "", "O"],
			["", "X", ""],
			["X", "", ""]
		],
	],
	[
		[
			["", "", "X"],
			["", "O", ""],
			["X", "", ""]
		],
	],
	[
		[
			["X", "O", "X"],
			["O", "O", "X"],
			["X", "X", "O"]
		],
	]

]

func test_no_win(params=use_parameters(no_win_parameters)):
	var board = params[0]
	var result = WinDetector.check_win(board)
	assert_eq(result, "", "This board should not have been a win")


var win_parameters = [
	[
		[
			["X", "", ""],
			["X", "", ""],
			["X", "", ""]
		], "x"
	],
	[
		[
			["", "X", ""],
			["", "X", ""],
			["", "X", ""]
		], "x"
	],
	[
		[
			["", "", "X"],
			["", "", "X"],
			["", "", "X"]
		], "x"
	],
	[
		[
			["O", "", ""],
			["O", "", ""],
			["O", "", ""]
		], "o"
	],
	[
		[
			["", "O", ""],
			["", "O", ""],
			["", "O", ""]
		], "o"
	],
	[
		[
			["", "", "O"],
			["", "", "O"],
			["", "", "O"]
		], "o"
	],
	[
		[
			["X", "X", "X"],
			["", "", ""],
			["", "", ""]
		], "x"
	],
	[
		[
			["", "", ""],
			["X", "X", "X"],
			["", "", ""]
		], "x"
	],
	[
		[
			["", "", ""],
			["", "", ""],
			["X", "X", "X"]
		], "x"
	],
	[
		[
			["O", "O", "O"],
			["", "", ""],
			["", "", ""]
		], "o"
	],
	[
		[
			["", "", ""],
			["O", "O", "O"],
			["", "", ""]
		], "o"
	],
	[
		[
			["", "", ""],
			["", "", ""],
			["O", "O", "O"]
		], "o"
	],
	[
		[
			["X", "", ""],
			["", "X", ""],
			["", "", "X"]
		], "x"
	],
	[
		[
			["", "", "X"],
			["", "X", ""],
			["X", "", ""]
		], "x"
	],
	[
		[
			["O", "", ""],
			["", "O", ""],
			["", "", "O"]
		], "o"
	],
	[
		[
			["", "", "O"],
			["", "O", ""],
			["O", "", ""]
		], "o"
	]
]


func test_board_win_rows_columns(params=use_parameters(win_parameters)):
	var board = params[0]
	var expected_victor = params[1]
	var result = (WinDetector.check_win(board) as String)
	assert_eq(result, expected_victor)
